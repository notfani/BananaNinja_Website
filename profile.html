<!DOCTYPE html>
<html lang="ru">
  <head>
    <title>My Banana</title>
    <link rel="icon" href="source\media\Favicon-big.ico" sizes="any" />
    <link rel="stylesheet" href="source\media\visual\style.css" />
  </head>
  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const formTitle = document.getElementById("form-title");
      const formFields = document.getElementById("form-fields");
      const submitBtn = document.getElementById("submit-btn");
      const loginBtn = document.getElementById("login-btn");
      const registerBtn = document.getElementById("register-btn");
      const userForm = document.getElementById("user-form");
      let mode = ""; // "login" или "register"
      const setMode = (newMode) => {
        mode = newMode;
        submitBtn.style.display = "block"; // Показываем кнопку
        submitBtn.disabled = true; // Деактивируем кнопку до ввода данных
        userForm.style.display = "block"; // Показываем форму
        formFields.innerHTML = ""; // Очищаем форму
        if (mode === "login") {
          formTitle.textContent = "Войти";
          formFields.innerHTML = `
        <input type="email" placeholder="Email" name="email" id="email" required />
        <input type="password" placeholder="Пароль" name="password" id="password" required />`;
        } else if (mode === "register") {
          formTitle.textContent = "Регистрация";
          formFields.innerHTML = `
        <input type="text" placeholder="Логин" name="username" id="username" required />
        <input type="email" placeholder="Email" name="email" id="email" required />
        <input type="password" placeholder="Пароль" name="password" id="password" required />
        <input type="password" placeholder="Повторите пароль" name="confirm_password" id="confirm_password" required />`;
        }
      };
      const validateForm = () => {
        const email = document.getElementById("email")?.value || "";
        const password = document.getElementById("password")?.value || "";
        const confirmPassword =
          document.getElementById("confirm_password")?.value || "";
        if (mode === "login") {
          submitBtn.disabled = !(email && password); // Активируем кнопку при наличии данных
        } else if (mode === "register") {
          submitBtn.disabled = !(
            email &&
            password &&
            confirmPassword &&
            password === confirmPassword
          );
        }
      };
      formFields.addEventListener("input", validateForm);
      loginBtn.addEventListener("click", () => {
        loginBtn.classList.add("active");
        registerBtn.classList.remove("active");
        setMode("login");
      });
      registerBtn.addEventListener("click", () => {
        registerBtn.classList.add("active");
        loginBtn.classList.remove("active");
        setMode("register");
      });
      submitBtn.addEventListener("click", (event) => {
        event.preventDefault(); // Предотвращаем отправку формы
        if (mode === "login") {
          alert("Такого аккаунта нет!");
        } else if (mode === "register") {
          alert("Аккаунт успешно создан!");
        }
      });
    });
  </script>
  <body>
    <main>
      <div id="form-container">
        <h1 id="form-title"></h1>
        <div id="toggle-buttons">
          <button id="login-btn">Войти</button>
          <button id="register-btn">Зарегистрироваться</button>
        </div>
        <form
          autocomplete="on"
          method="get"
          id="user-form"
          style="display: none"
        >
          <div id="form-fields">
            <!-- Поля будут добавляться динамически -->
          </div>
          <button type="submit" id="submit-btn" class="active_button">
            Подтвердить
          </button>
        </form>
      </div>
    </main>
  </body>
</html>
